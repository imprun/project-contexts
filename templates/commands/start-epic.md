**Note**: í•œêµ­ì–´ë¡œ ë‹µë³€í•˜ê³ , ê°„ê²°í•˜ê²Œ ì§„í–‰í•˜ì„¸ìš”.

---

EPIC ë¬¸ì„œë¥¼ Storyë³„ êµ¬í˜„ ê³„íšìœ¼ë¡œ ë¶„í•´í•˜ê³ , `.context/{í”„ë¡œì íŠ¸}/progress.md`ì— ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**êµ¬ì¡°**:
- **Epic**: í° ê¸°ëŠ¥ ë‹¨ìœ„ (KEP ìŠ¤íƒ€ì¼ ë¬¸ì„œ)
- **Story**: Epicì„ êµ¬í˜„ ê°€ëŠ¥í•œ ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„í•´ (User Story í˜•ì‹)
- **Task**: Story ë‚´ êµ¬ì²´ì ì¸ ì‘ì—… í•­ëª© (ì²´í¬ë¦¬ìŠ¤íŠ¸)

---

## âš ï¸ ì¤‘ìš”: Story ì‘ì„± ì›ì¹™

**StoryëŠ” "ë¬´ì—‡ì„(What)" í•´ì•¼ í•˜ëŠ”ì§€ë§Œ ì‘ì„±í•©ë‹ˆë‹¤. "ì–´ë–»ê²Œ(How)"ëŠ” ì‘ì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

### âŒ ë‚˜ìœ ì˜ˆ (êµ¬í˜„ ì½”ë“œ ìˆ˜ì¤€)
```markdown
## Story 1.1: JWT í† í° ìƒì„±

### Tasks
- [ ] `jwt.sign()` í•¨ìˆ˜ë¡œ í† í° ìƒì„±
- [ ] `crypto.randomBytes(32)` ë¡œ nonce ìƒì„±
- [ ] `expiresIn: '7d'` ì˜µì…˜ ì„¤ì •
```
â†’ **ì´ ì •ë„ ìƒì„¸í•˜ë©´ Storyê°€ ì•„ë‹ˆë¼ ì§ì ‘ ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”!**

### âœ… ì¢‹ì€ ì˜ˆ (Whatë§Œ ëª…ì‹œ)
```markdown
## Story 1.1: Agent ì¸ì¦ í† í° ì‹œìŠ¤í…œ

**As a** System Administrator,
**I want** Agentê°€ JWT í† í°ìœ¼ë¡œ ì¸ì¦í•  ìˆ˜ ìˆë„ë¡,
**So that** ìŠ¹ì¸ëœ Agentë§Œ ì„¤ì • ìŠ¤ëƒ…ìƒ·ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

### Acceptance Criteria
**Given** Agent IDì™€ Gateway IDê°€ ì£¼ì–´ì§€ë©´
**When** í† í° ë°œê¸‰ APIë¥¼ í˜¸ì¶œí•˜ë©´
**Then** ìœ íš¨í•œ JWT í† í°ì´ ë°˜í™˜ëœë‹¤

### Tasks
- [ ] Agent í† í° ë°œê¸‰ API êµ¬í˜„
- [ ] JWT í† í° ìƒì„± ë¡œì§ (nonce í¬í•¨)
- [ ] í† í° ê²€ì¦ ë¡œì§ (nonce DB ëŒ€ì¡°)
- [ ] nonce í…Œì´ë¸” ì„¤ê³„ ë° ìƒì„±

**êµ¬í˜„ íŒŒì¼**:
- `services/imprun-server/internal/api/v1/agent/auth.go`
- `services/imprun-server/internal/services/token_service.go`
```

**ì°¨ì´ì **:
- âŒ ë‚˜ìœ ì˜ˆ: í•¨ìˆ˜ëª…ê³¼ íŒŒë¼ë¯¸í„° ëª…ì‹œ â†’ **ë³µë¶™ ìˆ˜ì¤€**
- âœ… ì¢‹ì€ ì˜ˆ: "JWT í† í° ìƒì„± ë¡œì§" â†’ **Whatë§Œ ëª…ì‹œ**, êµ¬í˜„ì€ ê°œë°œì ì¬ëŸ‰

---

## 1ë‹¨ê³„: ì»¨í…ìŠ¤íŠ¸ ìˆ˜ì§‘

### Serena Memory ì½ê¸° (ìë™)

ìµœì‹  í”„ë¡œì íŠ¸ ìƒíƒœ íŒŒì•…:

```bash
# .serena/memories/ ì—ì„œ í”„ë¡œì íŠ¸ ê°œìš” í™•ì¸
ls -t ../.serena/memories/*.md | head -3

# ì½ì„ íŒŒì¼ (ìˆëŠ” ê²½ìš°):
# - project-overview.md: ì „ì²´ êµ¬ì¡°
# - [ê´€ë ¨ ì•„í‚¤í…ì²˜].md: í•´ë‹¹ ì˜ì—­ í˜„ì¬ ìƒíƒœ
```

**AI ì—ì´ì „íŠ¸ ì‘ì—…**:
1. Serena memoriesì—ì„œ í˜„ì¬ ì‹œìŠ¤í…œ ìƒíƒœ íŒŒì•…
2. `.context/archive/{í”„ë¡œì íŠ¸}/serena-*.md` ìµœì‹  ìŠ¤ëƒ…ìƒ· í™•ì¸ (ìˆëŠ” ê²½ìš°)
3. ê¸°ì¡´ ì•„í‚¤í…ì²˜ ì´í•´ í›„ Story ë¶„í•´ì— ë°˜ì˜

### EPIC ë¬¸ì„œ ì„ íƒ

`.context/{í”„ë¡œì íŠ¸}/epics/` í´ë”ë¥¼ ìŠ¤ìº”í•˜ì—¬ ì‚¬ìš© ê°€ëŠ¥í•œ EPIC ëª©ë¡ ì œì‹œ:

```
ğŸ“‚ ì‚¬ìš© ê°€ëŠ¥í•œ EPIC ëª©ë¡:
- EPIC-025: Tenant & User Management (ìƒíƒœ: ğŸ—ï¸ In Progress)
- EPIC-026: Audit Logs (ìƒíƒœ: â³ Not Started)
- (ìƒˆë¡œ ì‘ì„±) ìƒˆ EPIC ìƒì„±
```

### ê°œë°œìì—ê²Œ ì§ˆë¬¸

ë‹¤ìŒ ì§ˆë¬¸ì— ë‹µë³€í•´ì£¼ì„¸ìš”:

1. **ì–´ë–¤ EPICì„ ì‘ì—…í•˜ì‹œê² ìŠµë‹ˆê¹Œ?** (ë²ˆí˜¸ ì…ë ¥)
2. **EPIC ì „ì²´ë¥¼ í•œ ë²ˆì— ì‘ì—…í•˜ì‹œê² ìŠµë‹ˆê¹Œ, ì•„ë‹ˆë©´ ì¼ë¶€ Storyë§Œ ì„ íƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?**
3. **ì´ EPICì„ ëª‡ ê°œì˜ Storyë¡œ ë‚˜ëˆ„ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?**
4. **Story ê°„ ì˜ì¡´ì„±ì´ ìˆë‚˜ìš”?** (ì˜ˆ: Story 1.2ëŠ” Story 1.1 ì™„ë£Œ í›„ ì‹œì‘)

**Note**: ë‹µë³€ì´ ì—†ìœ¼ë©´ EPICì˜ Implementation Detailsë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìë™ìœ¼ë¡œ Storyë¥¼ ì œì•ˆí•©ë‹ˆë‹¤.

---

## 2ë‹¨ê³„: EPIC ë¬¸ì„œ ì½ê¸° ë° ë¶„ì„

1. **EPIC ë¬¸ì„œ ì½ê¸°**
   - `.context/{í”„ë¡œì íŠ¸}/epics/EPIC-[ë²ˆí˜¸]-*.md` íŒŒì¼ ì½ê¸°
   - Background, Motivation, Goals, Implementation Details íŒŒì•…

2. **Serena ê¸°ë°˜ ê¸°ìˆ  ìŠ¤íƒ í™•ì¸**
   - Serena memoriesì—ì„œ í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ ê¸°ìˆ  ìŠ¤íƒ í™•ì¸
   - ê¸°ì¡´ íŒ¨í„´ ì°¸ê³  (ì˜ˆ: Repository íŒ¨í„´, Service ê³„ì¸µ)

3. **êµ¬í˜„ ë²”ìœ„ ë¶„ì„**
   - API ë³€ê²½ ì‚¬í•­ (Backend)
   - ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë³€ê²½
   - UI ë³€ê²½ ì‚¬í•­ (Frontend)
   - í…ŒìŠ¤íŠ¸ ê³„íš

---

## 3ë‹¨ê³„: Story íŒŒì¼ ë° ì§„í–‰ìƒí™© íŒŒì¼ ìƒì„±

### ğŸ“ progress.md ì´ˆê¸°í™” ì—¬ë¶€ í™•ì¸

**`.context/{í”„ë¡œì íŠ¸}/progress.md` íŒŒì¼ì´ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê²½ìš°**:

ë‹¤ìŒ ì§ˆë¬¸ì— ë‹µë³€í•´ì£¼ì„¸ìš”:
1. **ê¸°ì¡´ progress.mdë¥¼ ìœ ì§€í•˜ê³  EPIC-XXX ì„¹ì…˜ë§Œ ì¶”ê°€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?** (ê¶Œì¥)
   - ì˜ˆ: ê¸°ì¡´ ë‚´ìš© ìœ ì§€ + ìƒˆ EPIC ì„¹ì…˜ ì¶”ê°€
   - ì•„ë‹ˆì˜¤: progress.md ì „ì²´ë¥¼ ìƒˆë¡œ ì‘ì„± (ê¸°ì¡´ ë‚´ìš© ì‚­ì œ)

**íŒŒì¼ì´ ì—†ëŠ” ê²½ìš°**: ìë™ìœ¼ë¡œ ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤.

---

### ğŸ“‚ ìƒì„±í•  íŒŒì¼ë“¤

1. **Story íŒŒì¼ë“¤** (`.context/{í”„ë¡œì íŠ¸}/stories/EPIC-[ë²ˆí˜¸]/story-[ë²ˆí˜¸].md`)
   - ê° Storyë§ˆë‹¤ ë³„ë„ íŒŒì¼ë¡œ ìƒì„¸ ì •ì˜
   - User Story í˜•ì‹, Acceptance Criteria, Tasks í¬í•¨

2. **ì§„í–‰ìƒí™© íŒŒì¼** (`.context/{í”„ë¡œì íŠ¸}/progress.md`)
   - Story ì§„í–‰ë¥  ì¶”ì 
   - ìš°ì„ ìˆœìœ„ ë° ì˜ì¡´ì„±
   - ì¼ì¼ ë¡œê·¸

### âš ï¸ Story ì‘ì„± ì‹œ ê¸ˆì§€ì‚¬í•­

**ì ˆëŒ€ ì‘ì„±í•˜ì§€ ë§ ê²ƒ**:
- âŒ í•¨ìˆ˜ëª…, ë³€ìˆ˜ëª…, íŒŒë¼ë¯¸í„° ì´ë¦„
- âŒ êµ¬ì²´ì ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜ í˜¸ì¶œ (`jwt.sign()`, `bcrypt.hash()` ë“±)
- âŒ ì½”ë“œ ìŠ¤ë‹ˆí« (10ì¤„ ì´ìƒì˜ êµ¬í˜„ ì½”ë“œ)
- âŒ ì •í™•í•œ SQL ì¿¼ë¦¬
- âŒ ì •í™•í•œ API ì—”ë“œí¬ì¸íŠ¸ ê²½ë¡œ

**ì‘ì„±í•´ë„ ë˜ëŠ” ê²ƒ**:
- âœ… ê¸°ëŠ¥ ì„¤ëª… ("JWT í† í° ìƒì„±", "nonce ê²€ì¦")
- âœ… ë°ì´í„° íë¦„ ("Agent ID â†’ í† í° ë°œê¸‰ â†’ DB ì €ì¥")
- âœ… Acceptance Criteria (Given/When/Then)
- âœ… ì˜í–¥ë°›ëŠ” íŒŒì¼ ê²½ë¡œ
- âœ… ê¸°ìˆ  ìŠ¤íƒ ì–¸ê¸‰ ("Go", "React", "JWT")
- âœ… ì•„í‚¤í…ì²˜ íŒ¨í„´ ("Service ê³„ì¸µì—ì„œ ì²˜ë¦¬")

### Story íŒŒì¼ êµ¬ì¡°

```markdown
# Story [ë²ˆí˜¸]: [Story ì œëª©]

**EPIC**: [EPIC-025: ê¸°ëŠ¥ëª…](../epics/EPIC-025-*.md)
**ìƒíƒœ**: â³ Not Started
**ìš°ì„ ìˆœìœ„**: P0 / P1 / P2
**ë‹´ë‹¹**: [ì´ë¦„ or TBD]
**ìƒì„±ì¼**: YYYY-MM-DD

---

## User Story

**As a** [user type],
**I want** [capability],
**So that** [value/benefit].

---

## Acceptance Criteria

**Given** [precondition]
**When** [action]
**Then** [expected outcome]

**And** [additional criteria]

---

## Tasks

**âš ï¸ Story íŒŒì¼ì—ëŠ” ì²´í¬ë°•ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.** (progress.mdì—ì„œë§Œ ì¶”ì )

1. Task 1: [Whatì„ í•´ì•¼ í•˜ëŠ”ì§€ë§Œ ì‘ì„±]
2. Task 2: [HowëŠ” ì‘ì„± ê¸ˆì§€]
3. Task 3: ...

---

## êµ¬í˜„ íŒŒì¼

> ğŸ’¡ **Serena Memory ì°¸ê³ **: `.serena/memories/project-overview.md`ì—ì„œ í˜„ì¬ íŒŒì¼ êµ¬ì¡° í™•ì¸

- `path/to/file1.go` - [ì—­í•  ì„¤ëª…]
- `path/to/file2.tsx` - [ì—­í•  ì„¤ëª…]

---

## Technical Notes

[Serenaì—ì„œ íŒŒì•…í•œ ê¸°ì¡´ íŒ¨í„´ ì°¸ê³ ]
- ì•„í‚¤í…ì²˜ íŒ¨í„´
- ê¸°ìˆ  ìŠ¤íƒ
- ì„¤ê³„ ê°€ì´ë“œ

---

## Prerequisites

- None (ì²« Story) ë˜ëŠ”
- Story 1.0 ì™„ë£Œ

---

## ì°¸ê³  ë§í¬

- [ê´€ë ¨ ë¶„ì„ ë¬¸ì„œ](../../archive/[ë¶„ì„ëª…]-analysis.md)
```

### progress.md êµ¬ì¡°

```markdown
# EPIC-025: [EPIC ì œëª©] ì§„í–‰ìƒí™©

**EPIC ë¬¸ì„œ**: [.context/{í”„ë¡œì íŠ¸}/epics/EPIC-025-*.md](epics/EPIC-025-*.md)
**ì‹œì‘ì¼**: YYYY-MM-DD
**ëª©í‘œ ì™„ë£Œì¼**: YYYY-MM-DD (ì„ íƒ)

---

## ğŸ“Š ì „ì²´ ì§„í–‰ë¥ 

| Story | ìƒíƒœ | Tasks | ì™„ë£Œ | ì§„í–‰ë¥  | ë‹´ë‹¹ |
|-------|------|-------|------|--------|------|
| [Story 1.1](stories/EPIC-025/story-1.1.md) | â³ Not Started | 5 | 0 | 0% | - |
| [Story 1.2](stories/EPIC-025/story-1.2.md) | â³ Not Started | 3 | 0 | 0% | - |
| **Total** | - | **8** | **0** | **0%** | - |

---

## âœ… Task ì²´í¬ë¦¬ìŠ¤íŠ¸ (Single Source of Truth)

### Story 1.1: [ì œëª©]
- [ ] Task 1: [ì„¤ëª…]
- [ ] Task 2: [ì„¤ëª…]

### Story 1.2: [ì œëª©]
- [ ] Task 1: [ì„¤ëª…]

---

## ğŸ”€ ìš°ì„ ìˆœìœ„ ë° ì˜ì¡´ì„±

```
Story 1.1 (P0: Foundation Setup)
    â†“
Story 1.2 (P0: Backend API) â†â”€â”€ Story 1.1 í•„ìš”
```

**ê¶Œì¥ ì§„í–‰ ìˆœì„œ:**
1. Story 1.1 (ë¨¼ì € ì™„ë£Œ í•„ìˆ˜)
2. Story 1.2 (Story 1.1 ì™„ë£Œ í›„)

---

## ğŸ“ ì¼ì¼ ë¡œê·¸

### YYYY-MM-DD (ì›”)
- Story 1.1 ì‹œì‘

---

## ğŸ“Œ ë©”ëª¨

- ì¤‘ìš” ì˜ì‚¬ê²°ì •: [ë‚´ìš©]
```

---

## 4ë‹¨ê³„: GitHub ë™ê¸°í™” (ì„ íƒ)

Story íŒŒì¼ ìƒì„± í›„ GitHub Issuesë¡œ ë™ê¸°í™”:

```bash
# EPIC â†’ GitHub Issue ìƒì„±
/sync-epic-to-github EPIC-025

# Stories â†’ GitHub sub-issues ìƒì„±
/sync-stories-to-github EPIC-025
```

**ê²°ê³¼**:
- GitHub Issue #25 ìƒì„± (EPIC)
- GitHub Issues #26-28 ìƒì„± (Stories, #25ì˜ sub-issues)

---

## 5ë‹¨ê³„: ê²°ê³¼ ìš”ì•½

ìƒì„±ëœ íŒŒì¼ë“¤ì„ ë³´ê³ í•©ë‹ˆë‹¤:

**Story íŒŒì¼ë“¤**:
- `.context/{í”„ë¡œì íŠ¸}/stories/EPIC-025/story-1.1.md`
- `.context/{í”„ë¡œì íŠ¸}/stories/EPIC-025/story-1.2.md`
- ...

**ì§„í–‰ìƒí™© íŒŒì¼**:
- `.context/{í”„ë¡œì íŠ¸}/progress.md` (ì§„í–‰ë¥  ì¶”ì  + ì¼ì¼ ë¡œê·¸)

**ìš”ì•½**:
- ì´ Xê°œ Story, Yê°œ Task
- **StoryëŠ” Whatë§Œ í¬í•¨** (HowëŠ” ê°œë°œ ì‹œ ê²°ì •)
- ë‹¤ìŒ ì‘ì—…: `/daily-start`ë¡œ í•˜ë£¨ ì‹œì‘

**GitHub ë™ê¸°í™” (ì„ íƒ)**:
```bash
/sync-epic-to-github EPIC-025
/sync-stories-to-github EPIC-025
```
